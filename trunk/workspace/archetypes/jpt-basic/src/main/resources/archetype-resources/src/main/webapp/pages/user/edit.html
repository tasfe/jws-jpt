<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link type="text/css" media="all" rel="stylesheet" href="../../styles/default/basic.css" />
<link type="text/css" media="all" rel="stylesheet" href="../../styles/default/edit.css" />
<style type="text/css">
<!--
li div {
	float:left;
	padding-left:10px;
	width: 150px;
	height:30px;
}

fieldset label {
	width:auto;
	font-weight:normal;
}
-->
</style>

<script type="text/javascript" src="../../scripts/jquery.js?v=1.2.6"></script>
<script type="text/javascript" src="../../scripts/toolkit.js?v=1.0.0"></script>
<script type="text/javascript" src="../../scripts/global.js?v=1.0.0"></script>
<script type="text/javascript">
<!--
function initialize (data) {
	loadScripts2([JPT.ctx.base + '/server/scripts/validation.js?model=user']);
	$('#model_password').change(function () {
		if (this.value != data.user.password) {
			this.form.encryptPass.value='true';
		}
	});
}
//-->
</script>

</head>
<body>
<textarea id="main_jst" style="display:none;">
<form name="userForm" id="userForm" method="post" action="${JPT.ctx.base}/pages/user/update/${user.id}.html">
	<div>
		<input type="hidden" name="model.id" value="${user.id}" />
		<input type="hidden" name="encryptPass" value="" />
	</div>
	<ul>
		<li>
			<label for="name">用户名:</label>
			<input type="text" class="text" name="model.name" id="model_name" value="${user.name}" />
		</li>
		<li>
			<label for="fullname">真实名:</label>
			<input type="text" class="text" name="model.fullname" id="model_fullname" value="${user.fullname}" />
		</li>
		<li>
			<label for="password">登录密码:</label>
			<input type="password" class="text" name="model.password" id="model_password" value="${user.password}" />
		</li>
		<li>
			<label for="title">确认密码:</label>
			<input type="password" class="text" name="model.confirmPassword" id="model_confirmPassword" value="${user.password}" />
		</li>
		<li>
			<label for="mobile">手机:</label>
			<input type="text" class="text" name="model.mobile" id="model_mobile" value="${user.mobile}" />
		</li>
		<li>
			<label for="email">邮件:</label>
			<input type="text" class="text" name="model.email" id="model_email" value="${user.email}" />
		</li>
		<li>
			<fieldset>
				<legend>角色</legend>
				{for role in allrole}
				{eval}
					checked = user.roles.some(function(r){
						return r.id == this.id;
					},role);			
				{/eval}
				<div>
					<input type="checkbox" class="checkbox" name="model.roleids" id="model_roleids_${role.id}" value="${role.id}"{if checked} checked="checked"{/if} />
					<label for="model_roleids_${role.id}">${role.name}</label>
				</div>
				{/for}
			</fieldset>
		</li>
		<li class="op">
			<input type="submit" class="jpt-ajax button" name="method:update" value="${JPT.ctx.lang['op.save']}" />
			<input type="button" class="jpt-back button" value="${JPT.ctx.lang['op.back']}" />
		</li>
	</ul>
</form>
</textarea>
<div id="main"></div>
</body>
</html>
